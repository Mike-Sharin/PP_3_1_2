<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns="http://www.w3.org/1999/html"
      xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity3"
      lang="en">
<head>
    <meta charset="UTF-8">
    <title>Create new user</title>
</head>
<body>

<h1>Создание нового пользователя</h1>

<hr/>
<br>

<form th:method="POST" th:action="@{/admin}" th:object="${user}">
    <div>
        <label for="login" >Введите login:</label>
        <input type="text" th:field="*{login}" id="login"/>
        <div style="color:red" th:if="${#fields.hasErrors('login')}" th:errors="*{login}">Login error</div>
        <br><br>
        <label for="name" >Введите имя:</label>
        <input type="text" th:field="*{name}" id="name"/>
        <div style="color:red" th:if="${#fields.hasErrors('name')}" th:errors="*{name}">Name error</div>
        <br><br>
        <label for="pass" >Введите пароль:</label>
        <input type="password" th:field="*{pass}" id="pass"/>
        <div style="color:red" th:if="${#fields.hasErrors('pass')}" th:errors="*{pass}">Pass error</div>
        <br><br>
        <label for="email" >Введите электронную почту:</label>
        <input type="text" th:field="*{email}" id="email"/>
        <div style="color:red" th:if="${#fields.hasErrors('email')}" th:errors="*{email}">Email error</div>
        <br><br>
        <p>
            <label>Роли:
                <input type="checkbox" name="roles"
                       th:each="role : ${roles}"
                       th:text="${role.getName().replace('ROLE_', '')}"
                       th:value="${role.getId()}"
                       th:field="*{roles}"
                />
            </label>
        </p>
        <div style="color:red" th:if="${#fields.hasErrors('roles')}" th:errors="*{roles}">Roles error</div>
        <br><br>
        <input type="submit" value="Сохранить">
    </div>
</form>

<br>
<hr/>
<br>

<a href="/admin">К списку пользователей</a>

</body>
</html>